# 运算符

* 算术运算符
* 关系运算符
* 布尔运算符
* 字符串运算符
* 文件测试运算符

原生bash不支持简单的数学运算，但是可以通过其他命令来实现，例如 `awk` 和 `expr`，expr 最常用

`expr` 是一款表达式计算工具，使用它能完成表达式的求值操作。

```shell
#!/bin/bash

value=`expr 1 + 2`
echo "value = ${value}"
```

> value = 3

**注意：**

`expr`表达式是用反引号\`括起来的，而不是单引号`''`

表达式和运算符之间是有空格的。

## 算符运算符

假设a=10，b=20

| 运算符 | 说明                                          | 举例                          |
| ------ | --------------------------------------------- | ----------------------------- |
| +      | 加法                                          | `expr $a + $b` 结果为 30。    |
| -      | 减法                                          | `expr $a - $b` 结果为 -10。   |
| *      | 乘法                                          | `expr $a \* $b` 结果为  200。 |
| /      | 除法                                          | `expr $b / $a` 结果为 2。     |
| %      | 取余                                          | `expr $b % $a` 结果为 0。     |
| =      | 赋值                                          | `a=$b` 将把变量 b 的值赋给 a。 |
| ==     | 相等。用于比较两个数字，相同则返回 true。     | `[ $a == $b ]` 返回 false。     |
| !=     | 不相等。用于比较两个数字，不相同则返回 true。 | `[ $a != $b ]` 返回 true。      |

```shell
#! /bin/bash

# 算术运算符
a=1
b=2

val=`expr $a + $b`
echo "a + b = $val"

val=`expr $a - $b`
echo "a - b = $val"
# 注意这里乘法必须转义才能实现乘法运算
val=`expr $a \* $b`
echo "a * b = $val"

val=`expr $a / $b`
echo "a / b = $val"

val=`expr $a % $b`
echo "a % b = $val"

val=`expr $a = $b`
echo "a = b : $val"

val=`expr $a != $b`
echo "a !=b : $val"

a=$b
echo "a = $b"
```

> a + b = 3
> a - b = -1
> a * b = 2
> a / b = 0
> a % b = 1
> a = b : 0
> a !=b : 1
> a = 2

## 关系运算符

关系运算符只支持数字，不支持字符串，除非字符串的值是数字。

假设a=10，b=20

| 运算符 | 说明                                                  | 举例                          |
| ------ | ----------------------------------------------------- | ----------------------------- |
| -eq    | 检测两个数是否相等，相等返回 true。                   | `[ $a -eq $b ] ` 返回 false。 |
| -ne    | 检测两个数是否不相等，不相等返回 true。               | `[ $a -ne $b ]`  返回 true。      |
| -gt    | 检测左边的数是否大于右边的，如果是，则返回 true。     | `[ $a -gt $b  ]` 返回 false。  |
| -lt    | 检测左边的数是否小于右边的，如果是，则返回 true。     | ` $a -lt $b ` 返回 true。     |
| -ge    | 检测左边的数是否大于等于右边的，如果是，则返回 true。 | ` $a -ge $b ` 返回 false。    |
| -le    | 检测左边的数是否小于等于右边的，如果是，则返回 true。 | ` $a -le $b ` 返回 true。     |

**注意：**

`[  ]`和中间表达式有空格

## 布尔运算符

假设a=10，b=20

| 运算符 | 说明                                                | 举例                                       |
| ------ | --------------------------------------------------- | ------------------------------------------ |
| !      | 非运算，表达式为 true 则返回 false，否则返回 true。 | `[ ! false ] `返回 true。                  |
| -o     | 或运算，有一个表达式为 true 则返回 true。           | `[ $a -lt 20 -o $b -gt 100 ]` 返回 true。  |
| -a     | 与运算，两个表达式都为 true 才返回 true。           | `[ $a -lt 20 -a $b -gt 100 ]` 返回 false。 |

## 字符串运算符

## 文件测试运算符